{
    "text": "Problem with nodeStorage",
    "created": "Tue, 27 Feb 2018 15:29:34 GMT",
    "type": "outline",
    "subs": [
        {
            "text": "Found a problem with <a href=\"https://github.com/scripting/nodeStorage\">nodeStorage</a>. I'm using this space to work it out. ",
            "created": "Tue, 27 Feb 2018 15:29:40 GMT"
        },
        {
            "text": "Here's the problem. If you go to a <a href=\"http://doc.blog/2018/02/21/aMorningMusicalDigression.html\">story</a> on Doc Searls' 1999.io blog, it adds the port the server is running on, 1999, to the URL and redirects to it. That's because nodeStorage is not running on port 80. That's a recent thing. I used to have it running on port 80, but I needed to use \"pagePark\" for other apps running on the machine, so I moved nodeStorage to port 1999. ",
            "created": "Tue, 27 Feb 2018 15:29:58 GMT"
        },
        {
            "text": "What's going on. nodeStorage is doing something cool. Actually the URL that's generated by the CMS is <a href=\"http://my.1999.io/users/dsearls/2018/02/22/oneMoreReasonNotToSweatTheRobotTakeover.html\">this</a>. When the request comes in for that address, it notices that there's a mapping from doc.blog to that sub-site, and redirects to it. It's pretty invisible, and a bit clever. I can't imagine someone else debugging this in the future and not being puzzled by it. (Hence this long comment.)",
            "created": "Tue, 27 Feb 2018 15:32:00 GMT"
        },
        {
            "text": "The answer. nodeStorage needs a bit more configuration. A boolean, say <i>flUsePortInRedirect. </i>If you don't need us to add the port to the URL we redirect to, set this to false. To maintain backward compatibility, it defaults true.",
            "created": "Tue, 27 Feb 2018 15:33:50 GMT"
        },
        {
            "text": "Now I have to implement it! I haven't updated nodeStorage in six months. I kind of don't like doing it, let a sleeping dog lie, etc. But I'm in the mood today to fix things. So here goes. ",
            "created": "Tue, 27 Feb 2018 15:35:20 GMT"
        },
        {
            "text": "Update: It worked the first time. Now to update the repository. <a href=\"https://github.com/scripting/nodeStorage#v095---22718-by-dw\">Done</a>. ",
            "created": "Tue, 27 Feb 2018 16:14:18 GMT"
        }
    ]
}